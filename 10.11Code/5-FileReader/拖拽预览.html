<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <title>HTML5应用之文件拖拽</title>
  <style type="text/css">
    .demo {
      width: 500px;
      margin: 50px auto
    }

    #drop_area {
      width: 100%;
      height: 100px;
      border: 3px dashed silver;
      line-height: 100px;
      text-align: center;
      font-size: 36px;
      color: #d3d3d3
    }

    #preview {
      width: 500px;
      overflow: hidden
    }
  </style>
</head>

<body>

  <div id="main">
    <div class="demo">
      <div id="drop_area">把文件拖动到这里告诉你内容</div>
      <div id="preview"></div>
    </div>
  </div>
  <script>
    // 1. 获取元素
    var dropArea = document.getElementById('drop_area');
    var preview = document.getElementById('preview');
    // 2. 阻止浏览器的默认行为(在dragover事件中去阻止)
    window.addEventListener('dragover', function (ev) {
      ev.preventDefault();
    })
    // 3. 给drop_area添加一个事件, drop
    dropArea.addEventListener('drop', function (ev) {
      ev.preventDefault();
      // 4. 获取从桌面上拖拽来的文件
      var file = ev.dataTransfer.files[0];
      // 5. 实例化FileReader
      var filereader = new FileReader();
      // 6. 调用读取方法
      filereader.readAsText(file);
      // 7. 等待读取完成
      filereader.onload = function () {
        // 8. 显示
        // console.log(filereader.result);
        preview.innerHTML = filereader.result;
      }

    })

  </script>
</body>

</html>